
WORK IN PROGRESS
================


Caves:

(a) rename caves.lua --> cave.lua

(b) rename "touching" in caves.lua --> neighbors

(c) treat CAVE_AREA as an extension to AREA class, mode == "cave"
    [ what about the dummy area used to grow the cave? ]

(d) get connections working properly


(e) get closets working properly  (clear seeds, right floor_h)

(f) get free-standing importants working properly
    [ probably use the chunks "found" by area code ]

(g) get SPOTS working again

(h) get the torch lighting working again



Runes : tidy up, make a SNKSKIN or BFALL or ROCKRED variation 


IDEA : a sharp corner removal pass [ before border stuff ]
       ] preserve symmetry, e.g. by preferring horizontal direction to merge ]


!!  give *every* prefab a "prob" value



Grower :

!!  apply_num  for different passes [ especially DECORATE ]

!!  compute a score early, do a check on first whole-seed "area" element
    and do the "max_size" check here too



Doors and Joiners:

+  I shape joiners can have "deep" and "over" values,
   allow them to overlap nearby room as per doors

   [ update all joiner prefabs with 16 unit deep and over ]

   [[ NOTE : can still use y_fit for deeper rects??? ]]

-  support "deep" and "over" for L-shape joiners

+  env field for doors and joiners are two values separated by a
   slash, e.g. "building/outdoor".  first value is front side,
   second value is back side.

   - if env field is a single keyword, equivalent to doubling it
     e.g. "cave" ---> "cave/cave"

   - support the word "any", e.g. "outdoor/any"
     [ so default value is "any/any" ]

   - support negation, e.g. "cave/!cave"

   - "indoor" is equivalent to "!outdoor"

-  fix level control "Doors" setting for joiners



Miscellaneous:

+  prevent decor in liquid sinks  [ EXCEPT liquid_pipe...  "liquid_decor" kind ]

+  F/R cages: also want mid-bars and/or corner posts [ esp. cages surrounded by liquids ]

-  sometimes have flashing/oscillate FX for free-range cages

-  more pillars in rooms

-  gameplay : prefer to teleport monsters into PREVIOUS rooms
   [ teleport ambushes suck, especially in very small rooms ]

